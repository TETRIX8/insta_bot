# Инструкция по установке и использованию Telegram бота для парсинга каналов

## Обзор проекта

Данный проект представляет собой Telegram бота для мониторинга публичных каналов, отслеживания новых постов и добавления комментариев под постами. Бот имеет удобную админ-панель для настройки всего функционала.

### Основные возможности:

1. Подписка на публичные Telegram каналы
2. Автоматическое отслеживание новых постов
3. Добавление комментариев под постами вручную через админ-панель
4. Управление шаблонами комментариев
5. Настройка интервала проверки новых постов
6. Автоматическая очистка старых данных (по умолчанию через 3 дня)
7. Защита админ-панели паролем (по умолчанию: 123456)

## Требования для установки

1. Python 3.9 или выше
2. Доступ к Telegram API (API ID и API Hash)
3. Номер телефона для авторизации в Telegram

## Установка

1. Распакуйте архив проекта в удобное место на вашем сервере или компьютере.

2. Установите необходимые зависимости:
   ```
   pip install telethon flask flask-login sqlalchemy apscheduler
   ```

3. Настройте параметры подключения к Telegram API в файле `bot/config.py`:
   - Замените `YOUR_API_ID` на ваш API ID
   - Замените `YOUR_API_HASH` на ваш API Hash
   
   Для получения API ID и API Hash:
   - Перейдите на сайт https://my.telegram.org/apps
   - Войдите в свой аккаунт Telegram
   - Создайте новое приложение
   - Скопируйте API ID и API Hash

## Запуск

1. Запустите бота и админ-панель:
   ```
   python main.py
   ```

2. Откройте админ-панель в браузере:
   ```
   http://localhost:5000
   ```

3. Войдите в админ-панель, используя пароль по умолчанию: `123456`

4. При первом запуске вам потребуется авторизоваться в Telegram:
   - Нажмите кнопку "Запустить бота" в разделе "Настройки"
   - В консоли появится запрос на ввод номера телефона
   - Введите номер телефона в международном формате (например, +79123456789)
   - Введите код подтверждения, который придет в Telegram

## Использование

### Управление каналами

1. Перейдите в раздел "Каналы"
2. Нажмите кнопку "Добавить канал"
3. Введите имя пользователя канала (например, durov)
4. Нажмите "Добавить канал"

После добавления канала бот автоматически начнет отслеживать новые посты.

### Управление комментариями

1. Перейдите в раздел "Комментарии"
2. Для создания шаблона комментария:
   - Нажмите "Добавить шаблон"
   - Введите описание и текст комментария
   - Нажмите "Добавить шаблон"

3. Для добавления комментария к посту:
   - Перейдите в раздел "Каналы"
   - Выберите канал и нажмите "Посты"
   - Выберите пост и нажмите "Комментарии"
   - Выберите шаблон комментария или введите свой текст
   - Нажмите "Добавить комментарий"

### Настройки

1. Перейдите в раздел "Настройки"
2. Настройте интервал проверки новых постов (в секундах)
3. Настройте период хранения данных (в днях)
4. Для изменения пароля нажмите "Изменить пароль"

## Управление ботом

В разделе "Настройки" вы можете:
- Запустить бота
- Остановить бота
- Очистить старые данные вручную

## Безопасность

- Доступ к админ-панели защищен паролем
- Рекомендуется сменить пароль по умолчанию при первом входе
- Все данные хранятся локально в базе данных SQLite

## Устранение неполадок

1. **Бот не запускается**:
   - Проверьте правильность API ID и API Hash в файле `bot/config.py`
   - Убедитесь, что все зависимости установлены
   - Проверьте наличие прав на запись в директорию проекта

2. **Не удается авторизоваться в Telegram**:
   - Убедитесь, что номер телефона введен в международном формате
   - Проверьте, не заблокирован ли ваш аккаунт Telegram

3. **Бот не отслеживает новые посты**:
   - Убедитесь, что бот запущен (раздел "Настройки")
   - Проверьте, что канал добавлен и активен
   - Увеличьте интервал проверки новых постов

4. **Не удается добавить комментарий**:
   - Убедитесь, что бот запущен
   - Проверьте, что у бота есть права на комментирование в канале
   - Проверьте, что пост существует и доступен для комментирования

## Дополнительная информация

- База данных хранится в файле `data/telegram_bot.db`
- Сессия Telegram хранится в файле `telegram_bot_session.session`
- Логи работы бота выводятся в консоль

## Контакты для поддержки

Если у вас возникли вопросы или проблемы с использованием бота, пожалуйста, обратитесь к разработчику.
